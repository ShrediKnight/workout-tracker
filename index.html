<!DOCTYPE html>
<html>
<head>
    <title>Workout Tracker</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
const { useState, useEffect } = React;

// Simple icon components using Unicode symbols
const Dumbbell = () => React.createElement('span', { style: { fontSize: '1.2em' } }, 'üí™');
const TrendingUp = () => React.createElement('span', { style: { fontSize: '1.2em' } }, 'üìà');
const Home = () => React.createElement('span', { style: { fontSize: '1.2em' } }, 'üè†');
const Building = () => React.createElement('span', { style: { fontSize: '1.2em' } }, 'üè¢');
const CheckCircle = () => React.createElement('span', { style: { fontSize: '1.2em' } }, '‚úÖ');

const WorkoutTracker = () => {
  const [selectedWorkout, setSelectedWorkout] = useState(null);
  const [selectedLocation, setSelectedLocation] = useState('home');
  const [workoutHistory, setWorkoutHistory] = useState({});
  const [currentSession, setCurrentSession] = useState({});
  const [showHistory, setShowHistory] = useState(false);

  // Load data from localStorage on component mount
  useEffect(() => {
    const savedHistory = localStorage.getItem('workoutHistory');
    if (savedHistory) {
      setWorkoutHistory(JSON.parse(savedHistory));
    }
  }, []);

  // Save to localStorage whenever workoutHistory changes
  useEffect(() => {
    localStorage.setItem('workoutHistory', JSON.stringify(workoutHistory));
  }, [workoutHistory]);

  const workouts = {
    A: {
      name: "Upper Body Power",
      focus: "Chest, Back, Shoulders",
      home: [
        { name: "Barbell Chest Press (floor)", sets: 4, reps: "6-8", rest: "90s", id: "barbell_chest_press" },
        { name: "Bent-Over Barbell Row", sets: 4, reps: "6-8", rest: "90s", id: "barbell_row" },
        { name: "DB Shoulder Press", sets: 3, reps: "8-10", rest: "60s", id: "db_shoulder_press" },
        { name: "DB Flyes (floor)", sets: 3, reps: "10-12", rest: "60s", id: "db_flyes" },
        { name: "Barbell Curls", sets: 3, reps: "8-10", rest: "45s", id: "barbell_curls" },
        { name: "Jump Rope", sets: 2, reps: "30s", rest: "30s", id: "jump_rope" }
      ],
      office: [
        { name: "Chest Press Machine", sets: 4, reps: "6-8", rest: "90s", id: "chest_press_machine" },
        { name: "Seated Cable Row", sets: 4, reps: "6-8", rest: "90s", id: "seated_cable_row" },
        { name: "DB Shoulder Press", sets: 3, reps: "8-10", rest: "60s", id: "db_shoulder_press" },
        { name: "Fly/Deltoid Machine", sets: 3, reps: "10-12", rest: "60s", id: "fly_machine" },
        { name: "Preacher Curls", sets: 3, reps: "8-10", rest: "45s", id: "preacher_curls" },
        { name: "Treadmill", sets: 2, reps: "1min", rest: "30s", id: "treadmill" }
      ]
    },
    B: {
      name: "Lower Body Strength",
      focus: "Quads, Glutes, Hamstrings",
      home: [
        { name: "Goblet Squats", sets: 4, reps: "8-10", rest: "90s", id: "goblet_squats" },
        { name: "Romanian Deadlifts", sets: 4, reps: "8-10", rest: "90s", id: "romanian_deadlifts" },
        { name: "Bulgarian Split Squats", sets: 3, reps: "8/leg", rest: "60s", id: "bulgarian_split_squats" },
        { name: "Single-Leg RDL", sets: 3, reps: "8/leg", rest: "60s", id: "single_leg_rdl" },
        { name: "Box Step-Ups", sets: 3, reps: "10/leg", rest: "45s", id: "box_step_ups" },
        { name: "KB Swings", sets: 3, reps: "15", rest: "45s", id: "kb_swings" }
      ],
      office: [
        { name: "Smith Machine Squats", sets: 4, reps: "8-10", rest: "90s", id: "smith_squats" },
        { name: "Smith Machine RDL", sets: 4, reps: "8-10", rest: "90s", id: "smith_rdl" },
        { name: "Bulgarian Split Squats", sets: 3, reps: "8/leg", rest: "60s", id: "bulgarian_split_squats" },
        { name: "Leg Curls", sets: 3, reps: "8-10", rest: "60s", id: "leg_curls" },
        { name: "Leg Press", sets: 3, reps: "10-12", rest: "45s", id: "leg_press" },
        { name: "Stair Climber", sets: 3, reps: "30s", rest: "45s", id: "stair_climber" }
      ]
    },
    C: {
      name: "Full Body Circuit",
      focus: "Total body conditioning",
      home: [
        { name: "Thrusters", sets: 3, reps: "8", rest: "circuit", id: "thrusters" },
        { name: "Renegade Rows", sets: 3, reps: "6/arm", rest: "circuit", id: "renegade_rows" },
        { name: "Box Jumps", sets: 3, reps: "8", rest: "circuit", id: "box_jumps" },
        { name: "KB Goblet Squats", sets: 3, reps: "10", rest: "circuit", id: "kb_goblet_squats" },
        { name: "Push-Ups", sets: 3, reps: "8-12", rest: "circuit", id: "push_ups" },
        { name: "Jump Rope", sets: 3, reps: "30s", rest: "90s", id: "jump_rope_circuit" }
      ],
      office: [
        { name: "DB Thrusters", sets: 3, reps: "8", rest: "circuit", id: "db_thrusters_office" },
        { name: "Cable Rows", sets: 3, reps: "8", rest: "circuit", id: "cable_rows" },
        { name: "Pull-ups/Assisted", sets: 3, reps: "6-10", rest: "circuit", id: "pullups" },
        { name: "Leg Press", sets: 3, reps: "10", rest: "circuit", id: "leg_press_circuit" },
        { name: "Push-Ups", sets: 3, reps: "8-12", rest: "circuit", id: "push_ups_office" },
        { name: "Elliptical", sets: 3, reps: "30s", rest: "90s", id: "elliptical" }
      ]
    },
    D: {
      name: "Upper Body Volume",
      focus: "Arms, Shoulders, Back",
      home: [
        { name: "DB Chest Press (floor)", sets: 4, reps: "10-12", rest: "75s", id: "db_chest_press_floor" },
        { name: "Single-Arm DB Row", sets: 4, reps: "10/arm", rest: "60s", id: "single_arm_row" },
        { name: "Lateral Raises", sets: 4, reps: "12-15", rest: "45s", id: "lateral_raises" },
        { name: "Barbell Upright Row", sets: 3, reps: "10", rest: "60s", id: "barbell_upright_row" },
        { name: "Hammer Curls", sets: 3, reps: "12", rest: "45s", id: "hammer_curls" },
        { name: "Overhead Tricep Press", sets: 3, reps: "12", rest: "45s", id: "overhead_tricep_press" }
      ],
      office: [
        { name: "Chest Press Machine", sets: 4, reps: "10-12", rest: "75s", id: "chest_press_machine_volume" },
        { name: "Lat Pull-Down", sets: 4, reps: "10-12", rest: "60s", id: "lat_pulldown" },
        { name: "Lateral Raise Machine", sets: 4, reps: "12-15", rest: "45s", id: "lateral_raise_machine" },
        { name: "Cable Upright Row", sets: 3, reps: "10", rest: "60s", id: "cable_upright_row" },
        { name: "Hammer Curls", sets: 3, reps: "12", rest: "45s", id: "hammer_curls_office" },
        { name: "Cable Tricep Pushdown", sets: 3, reps: "12", rest: "45s", id: "cable_tricep_pushdown" }
      ]
    }
  };

  const getExerciseHistory = (exerciseId) => {
    const history = workoutHistory[exerciseId] || [];
    return history.slice(-2); // Last 2 entries
  };

  const getFullExerciseHistory = (exerciseId) => {
    return workoutHistory[exerciseId] || [];
  };

  const saveExerciseData = (exerciseId, weight, reps, notes = '') => {
    const today = new Date().toISOString().split('T')[0];
    const entry = {
      date: today,
      weight: parseFloat(weight) || 0,
      reps: parseInt(reps) || 0,
      notes
    };

    setWorkoutHistory(prev => ({
      ...prev,
      [exerciseId]: [...(prev[exerciseId] || []), entry]
    }));

    setCurrentSession(prev => ({
      ...prev,
      [exerciseId]: entry
    }));
  };

const ExerciseCard = ({ exercise }) => {
  const history = getExerciseHistory(exercise.id);
  const currentData = currentSession[exercise.id] || { weight: '', reps: '', notes: '' };
  
  // Local state for inputs to prevent re-render on every keystroke
  const [localWeight, setLocalWeight] = useState(currentData.weight);
  const [localReps, setLocalReps] = useState(currentData.reps);
  const [localNotes, setLocalNotes] = useState(currentData.notes);

  // Update local state when currentData changes (from saved data)
  useEffect(() => {
    setLocalWeight(currentData.weight);
    setLocalReps(currentData.reps);
    setLocalNotes(currentData.notes);
  }, [currentData.weight, currentData.reps, currentData.notes]);

  // Update main state when user finishes editing
  const updateMainState = () => {
    setCurrentSession(prev => ({
      ...prev,
      [exercise.id]: { weight: localWeight, reps: localReps, notes: localNotes }
    }));
  };
  
  return (
    <div className="bg-white rounded-lg shadow-md p-4 mb-4">
      <div className="flex justify-between items-start mb-3">
        <div>
          <h3 className="font-semibold text-lg">{exercise.name}</h3>
          <p className="text-sm text-gray-600">{exercise.sets} sets √ó {exercise.reps} reps</p>
          {exercise.rest !== 'circuit' && <p className="text-xs text-gray-500">Rest: {exercise.rest}</p>}
        </div>
      </div>

      {/* Previous History */}
      {history.length > 0 && (
        <div className="bg-gray-50 rounded p-3 mb-3">
          <h4 className="text-sm font-medium text-gray-700 mb-2">Previous Sessions:</h4>
          {history.map((entry, index) => (
            <div key={index} className="text-sm text-gray-600 flex justify-between">
              <span>{entry.date}</span>
              <span>{entry.weight}lbs √ó {entry.reps} reps</span>
            </div>
          ))}
        </div>
      )}

      {/* Current Session Input */}
      <div className="grid grid-cols-2 gap-3 mb-3">
        <div>
          <label className="block text-sm font-medium text-gray-700 mb-1">Weight (lbs)</label>
          <input
            type="number"
            value={localWeight}
            onChange={(e) => setLocalWeight(e.target.value)}
            onBlur={updateMainState}
            className="w-full p-2 border border-gray-300 rounded-md"
            placeholder="0"
          />
        </div>
        <div>
          <label className="block text-sm font-medium text-gray-700 mb-1">Reps</label>
          <input
            type="number"
            value={localReps}
            onChange={(e) => setLocalReps(e.target.value)}
            onBlur={updateMainState}
            className="w-full p-2 border border-gray-300 rounded-md"
            placeholder="0"
          />
        </div>
      </div>

      <div className="mb-3">
        <label className="block text-sm font-medium text-gray-700 mb-1">Notes (optional)</label>
        <input
          type="text"
          value={localNotes}
          onChange={(e) => setLocalNotes(e.target.value)}
          onBlur={updateMainState}
          className="w-full p-2 border border-gray-300 rounded-md"
          placeholder="Feel good, form was solid, etc."
        />
      </div>

      <button
        onClick={() => {
          updateMainState();
          saveExerciseData(exercise.id, localWeight, localReps, localNotes);
        }}
        className="w-full bg-blue-500 text-white py-2 px-4 rounded-md hover:bg-blue-600 flex items-center justify-center"
        disabled={!localWeight || !localReps}
      >
        <CheckCircle />
        <span className="ml-2">Save Set</span>
      </button>
    </div>
  );
};

  const ProgressChart = () => {
    const [selectedExercise, setSelectedExercise] = useState('');
    
    const allExercises = Object.values(workouts).flatMap(workout => 
      [...workout.home, ...workout.office]
    ).filter((exercise, index, self) => 
      index === self.findIndex(e => e.id === exercise.id)
    );

    const exercisesWithHistory = allExercises.filter(exercise => 
      workoutHistory[exercise.id] && workoutHistory[exercise.id].length > 0
    );

    if (!selectedExercise && exercisesWithHistory.length > 0) {
      setSelectedExercise(exercisesWithHistory[0].id);
    }

    const history = selectedExercise ? getFullExerciseHistory(selectedExercise) : [];

    return (
      <div className="bg-white rounded-lg shadow-md p-6">
        <h2 className="text-xl font-bold mb-4 flex items-center">
          <TrendingUp />
          <span className="ml-2">Progress Tracking</span>
        </h2>
        
        {exercisesWithHistory.length === 0 ? (
          <p className="text-gray-500">Start logging workouts to see your progress!</p>
        ) : (
          <>
            <select
              value={selectedExercise}
              onChange={(e) => setSelectedExercise(e.target.value)}
              className="w-full p-2 border border-gray-300 rounded-md mb-4"
            >
              {exercisesWithHistory.map(exercise => (
                <option key={exercise.id} value={exercise.id}>
                  {exercise.name}
                </option>
              ))}
            </select>
            
            <div className="space-y-2">
              {history.map((entry, index) => (
                <div key={index} className="flex justify-between items-center p-3 bg-gray-50 rounded">
                  <span className="text-sm text-gray-600">{entry.date}</span>
                  <span className="font-medium">{entry.weight}lbs √ó {entry.reps}</span>
                  {entry.notes && <span className="text-xs text-gray-500 italic">{entry.notes}</span>}
                </div>
              ))}
            </div>
          </>
        )}
      </div>
    );
  };

  if (showHistory) {
    return (
      <div className="min-h-screen bg-gray-100 p-4">
        <div className="max-w-md mx-auto">
          <button
            onClick={() => setShowHistory(false)}
            className="mb-4 text-blue-500 hover:text-blue-700"
          >
            ‚Üê Back to Workouts
          </button>
          <ProgressChart />
        </div>
      </div>
    );
  }

  if (selectedWorkout) {
    const workout = workouts[selectedWorkout];
    const exercises = workout[selectedLocation];

    return (
      <div className="min-h-screen bg-gray-100 p-4">
        <div className="max-w-md mx-auto">
          <button
            onClick={() => setSelectedWorkout(null)}
            className="mb-4 text-blue-500 hover:text-blue-700"
          >
            ‚Üê Back to Workouts
          </button>
          
          <div className="bg-white rounded-lg shadow-md p-6 mb-6">
            <h1 className="text-xl font-bold mb-2">Workout {selectedWorkout}: {workout.name}</h1>
            <p className="text-gray-600 mb-4">{workout.focus}</p>
            
            <div className="flex items-center justify-center space-x-4 mb-4">
              <button
                onClick={() => setSelectedLocation('home')}
                className={`flex items-center px-4 py-2 rounded-md ${
                  selectedLocation === 'home' 
                    ? 'bg-blue-500 text-white' 
                    : 'bg-gray-200 text-gray-700'
                }`}
              >
                <Home />
                <span className="ml-2">Home</span>
              </button>
              <button
                onClick={() => setSelectedLocation('office')}
                className={`flex items-center px-4 py-2 rounded-md ${
                  selectedLocation === 'office' 
                    ? 'bg-blue-500 text-white' 
                    : 'bg-gray-200 text-gray-700'
                }`}
              >
                <Building />
                <span className="ml-2">Office</span>
              </button>
            </div>
          </div>

          <div>
            {exercises.map((exercise, index) => (
              <ExerciseCard key={exercise.id} exercise={exercise} />
            ))}
          </div>
        </div>
      </div>
    );
  }

  return (
    <div className="min-h-screen bg-gray-100 p-4">
      <div className="max-w-md mx-auto">
        <div className="bg-white rounded-lg shadow-md p-6 mb-6">
          <h1 className="text-2xl font-bold text-center mb-2 flex items-center justify-center">
            <Dumbbell />
            <span className="ml-2">Workout Tracker</span>
          </h1>
          <p className="text-gray-600 text-center">Track your flexible home & office routine</p>
        </div>

        <div className="grid grid-cols-2 gap-4 mb-6">
          {Object.entries(workouts).map(([key, workout]) => (
            <button
              key={key}
              onClick={() => setSelectedWorkout(key)}
              className="bg-white rounded-lg shadow-md p-4 text-left hover:shadow-lg transition-shadow"
            >
              <h3 className="font-semibold text-lg mb-1">Workout {key}</h3>
              <p className="text-sm text-gray-600 mb-2">{workout.name}</p>
              <p className="text-xs text-gray-500">{workout.focus}</p>
            </button>
          ))}
        </div>

        <button
          onClick={() => setShowHistory(true)}
          className="w-full bg-green-500 text-white py-3 px-4 rounded-md hover:bg-green-600 flex items-center justify-center"
        >
          <TrendingUp />
          <span className="ml-2">View Progress History</span>
        </button>
      </div>
    </div>
  );
};

ReactDOM.render(<WorkoutTracker />, document.getElementById('root'));
    </script>
</body>
</html>



